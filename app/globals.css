@import "tailwindcss";

@custom-variant dark (&:where(.dark, .dark *));

/* ── Theme-aware custom properties ── */
:root {
  /* Light (diurna) — elegant white + burgundy */
  --surface-val: #FFFFFF;
  --surface-alt-val: #FAFAFA;
  --dark-bg-val: #F5F5F5;
  --cream-val: #1C1C1E;
  --warm-white-val: #FFFFFF;
  --charcoal-val: #1C1C1E;
  --scrollbar-track: #FFFFFF;
  --scrollbar-thumb: rgba(107, 29, 58, 0.15);
  --scrollbar-thumb-hover: rgba(107, 29, 58, 0.35);
  --selection-bg: #C4A265;
  --selection-fg: #FFFFFF;
  --grain-opacity: 0.015;
}

.dark {
  /* Dark (nocturna) — black + burgundy + gold */
  --surface-val: #0F0A0D;
  --surface-alt-val: #140F14;
  --dark-bg-val: #0F0A0D;
  --cream-val: #F7F3EE;
  --warm-white-val: #1A151A;
  --charcoal-val: #F7F3EE;
  --scrollbar-track: #0F0A0D;
  --scrollbar-thumb: rgba(107, 29, 58, 0.38);
  --scrollbar-thumb-hover: #6B1D3A;
  --selection-bg: #C4A265;
  --selection-fg: #0F0A0D;
  --grain-opacity: 0.02;
}

@theme {
  /* Brand colors (fixed across themes) */
  --color-burgundy: #6B1D3A;
  --color-burgundy-light: #8B2252;
  --color-burgundy-dark: #4A0E27;
  --color-gold: #C4A265;
  --color-gold-light: #D4B87A;

  /* Semantic colors (theme-aware) */
  --color-cream: var(--cream-val);
  --color-warm-white: var(--warm-white-val);
  --color-charcoal: var(--charcoal-val);
  --color-dark-bg: var(--dark-bg-val);
  --color-surface: var(--surface-val);
  --color-surface-alt: var(--surface-alt-val);

  --font-display: var(--font-cormorant);
  --font-body: var(--font-dm-sans);
}

html {
  scroll-behavior: smooth;
}

body {
  background: var(--surface-val);
  color: var(--cream-val);
  font-family: var(--font-body), system-ui, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Grain texture overlay */
body::after {
  content: "";
  position: fixed;
  inset: 0;
  z-index: 50;
  pointer-events: none;
  opacity: var(--grain-opacity);
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  background-size: 128px 128px;
}

/* Selection */
::selection {
  background: var(--selection-bg);
  color: var(--selection-fg);
}

/* Scrollbar */
::-webkit-scrollbar {
  width: 6px;
}
::-webkit-scrollbar-track {
  background: var(--scrollbar-track);
}
::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb);
  border-radius: 3px;
}
::-webkit-scrollbar-thumb:hover {
  background: var(--scrollbar-thumb-hover);
}

/* ── Article prose — dark mode ── */
.dark .prose-article {
  line-height: 1.8;
  font-size: 1.0625rem;
  color: #F7F3EEcc;
}
.dark .prose-article h1,
.dark .prose-article h2,
.dark .prose-article h3 {
  font-family: var(--font-display), Georgia, serif;
  color: #F7F3EE;
  letter-spacing: -0.02em;
}
.dark .prose-article a { color: #C4A265; }
.dark .prose-article a:hover { color: #D4B87A; }
.dark .prose-article blockquote {
  border-left: 3px solid #C4A265;
  color: #F7F3EE80;
}
.dark .prose-article code {
  background: #F7F3EE0A;
}
.dark .prose-article pre {
  background: #1A1520;
  color: #F7F3EE;
}
.dark .prose-article hr {
  border-top: 1px solid #F7F3EE15;
}

/* ── Article prose — light mode ── */
.prose-article {
  line-height: 1.8;
  font-size: 1.0625rem;
  color: #1C1C1Ecc;
}
.prose-article h1,
.prose-article h2,
.prose-article h3 {
  font-family: var(--font-display), Georgia, serif;
  color: #1C1C1E;
  letter-spacing: -0.02em;
}
.prose-article h1 { font-size: 2rem; font-weight: 600; margin-top: 2.5rem; margin-bottom: 1rem; }
.prose-article h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 0.75rem; }
.prose-article h3 { font-size: 1.25rem; font-weight: 500; margin-top: 1.5rem; margin-bottom: 0.5rem; }
.prose-article p { margin-bottom: 1.25rem; max-width: 65ch; }
.prose-article a { color: #6B1D3A; text-decoration: underline; text-underline-offset: 2px; }
.prose-article a:hover { color: #8B2252; }
.prose-article blockquote {
  border-left: 3px solid #6B1D3A;
  padding-left: 1.25rem;
  margin: 1.5rem 0;
  font-style: italic;
  color: #1C1C1E80;
}
.prose-article ul,
.prose-article ol {
  padding-left: 1.5rem;
  margin-bottom: 1.25rem;
}
.prose-article li { margin-bottom: 0.375rem; }
.prose-article code {
  background: #1C1C1E0A;
  padding: 0.15rem 0.4rem;
  border-radius: 4px;
  font-size: 0.9em;
}
.prose-article pre {
  background: #1C1C1E;
  color: #F7F3EE;
  padding: 1.25rem;
  border-radius: 12px;
  overflow-x: auto;
  margin: 1.5rem 0;
}
.prose-article pre code {
  background: none;
  padding: 0;
}
.prose-article hr {
  border: none;
  border-top: 1px solid #1C1C1E15;
  margin: 2rem 0;
}
